# 📖 知識庫管理後台 - 客戶操作手冊

> **適用對象**：完全不會寫程式的維運人員  
> **更新日期**：2026-01-20

---

## 🎯 快速導覽

- [登入管理後台](#1-登入管理後台)
- [匯入 Excel 檔案](#2-匯入-excel-檔案)
- [匯入 PDF 檔案](#3-匯入-pdf-檔案)
- [線上編輯知識](#4-線上編輯知識)
- [儲存知識庫](#5-儲存知識庫)
- [常見問題](#6-常見問題排除)

---

## 1. 登入管理後台

### 步驟 1：開啟網站

在瀏覽器中打開寵物 AI 助手網站。

### 步驟 2：點擊設定按鈕

在網頁最下方，版本資訊旁邊，找到「⚙️ 設定」按鈕並點擊。

![設定按鈕位置](./docs/admin-button.png)

### 步驟 3：輸入密碼

在彈出的密碼對話框中，輸入管理員密碼：

```
預設密碼：admin123
```

> ⚠️ **重要提醒**：首次使用後，請聯絡技術人員修改密碼！

---

## 2. 匯入 Excel 檔案

### 適用情境

- 批次新增大量知識條目
- 定期更新既有的寵物照護資料
- 從其他系統匯出的結構化資料

### Excel 檔案格式要求

#### 必要欄位（請完全按照以下欄位名稱）

| 欄位名稱     | 說明                 | 範例                                         |
| ------------ | -------------------- | -------------------------------------------- |
| **類別**     | 必填，限四種類別之一 | `餵養` 或 `禁忌` 或 `醫療急救` 或 `日常照護` |
| **標題**     | 必填，簡短明確的標題 | `幼犬餵養頻率`                               |
| **關鍵字**   | 必填，用逗號分隔     | `幼犬,餵養,頻率,次數`                        |
| **內容**     | 必填，詳細說明       | `幼犬（1-4個月）建議每天餵食3-4餐...`        |
| **來源**     | 選填，資料來源       | `獸醫師協會照護指南 第5版`                   |
| **物種**     | 必填，逗號分隔       | `dog` 或 `cat` 或 `dog,cat`                  |
| **風險等級** | 必填，三種等級之一   | `low` 或 `medium` 或 `high`                  |

#### Excel 範本下載

1. 登入管理後台後
2. 點擊左側「📥 下載 Excel 範本」按鈕
3. 系統會下載 `寵物知識庫範本.xlsx`
4. 在範本中填寫您的資料

### 匯入步驟

#### 方法 1：拖放上傳

1. 準備好您的 Excel 檔案（.xlsx 或 .xls）
2. 直接拖動檔案到「上傳區域」的虛線框內
3. 等待系統處理（通常 1-3 秒）
4. 看到 ✅ 綠色成功訊息

#### 方法 2：點擊選擇

1. 點擊「📎 選擇檔案」按鈕
2. 在檔案總管中選擇 Excel 檔案
3. 點擊「開啟」
4. 系統自動處理並顯示結果

### 匯入後確認

匯入成功後，右側表格會顯示所有新增的知識條目，請仔細檢查：

- ✅ 標題是否正確
- ✅ 內容是否完整
- ✅ 關鍵字是否適當
- ✅ 物種選擇是否正確（🐕 或 🐈）
- ✅ 風險等級是否合理

---

## 3. 匯入 PDF 檔案

### 適用情境

- 獸醫提供的電子版衛教文件
- 從網路下載的寵物健康指南
- 掃描的紙本資料（需清晰可讀）

### PDF 要求

- ✅ 文件大小：小於 10 MB
- ✅ 格式：文字 PDF（可複製文字的）
- ✅ 語言：繁體中文或英文
- ⚠️ 掃描 PDF：清晰度要求高，建議先轉換成文字 PDF

### 匯入步驟

1. **準備 PDF 檔案**：確保內容清晰可讀

2. **上傳檔案**：
   - 拖放到上傳區域
   - 或點擊「選擇檔案」

3. **AI 自動提取**（約需 10-30 秒）：
   - 系統使用 AI 分析 PDF 內容
   - 自動識別重要知識點
   - 轉換成結構化的知識條目
   - 自動分配類別和風險等級

4. **人工確認與修正**：
   - 📌 **重要**：AI 提取可能有誤，請務必檢查！
   - 檢查標題是否語意清楚
   - 檢查內容是否正確完整
   - 修正類別（如果 AI 分類錯誤）
   - 調整風險等級（如果評估不當）

### 常見 PDF 提取問題

| 問題       | 原因                | 解決方法               |
| ---------- | ------------------- | ---------------------- |
| 提取失敗   | 後端服務未啟動      | 確認執行 `npm run api` |
| 內容亂碼   | 掃描 PDF 或編碼問題 | 轉換成文字 PDF 後重試  |
| 知識不完整 | AI 判斷不重要       | 改用 Excel 手動輸入    |
| 類別錯誤   | AI 理解偏差         | 在表格中手動修正類別   |

---

## 4. 線上編輯知識

### 表格操作說明

#### 新增條目

點擊左側「➕ 手動新增條目」按鈕，會在表格最下方新增一行空白條目。

#### 編輯欄位

| 欄位       | 操作方式   | 說明                                   |
| ---------- | ---------- | -------------------------------------- |
| **類別**   | 下拉選單   | 四選一：醫療急救、餵養、日常照護、禁忌 |
| **標題**   | 文字輸入框 | 簡短明確，例如「幼犬餵養頻率」         |
| **關鍵字** | 文字輸入框 | 用逗號分隔，例如「幼犬,餵養,頻率」     |
| **內容**   | 文字區域   | 支援換行，可輸入長文                   |
| **來源**   | 文字輸入框 | 資料來源，例如「獸醫師協會指南」       |
| **物種**   | 核取方塊   | 可複選：🐕 狗、🐈 貓                   |
| **風險**   | 下拉選單   | 三選一：低、中、高                     |

#### 刪除條目

每一行最右側有「🗑️ 刪除」按鈕，點擊後會要求確認。

> ⚠️ **注意**：刪除操作在「儲存知識庫」之前都可以復原（重新載入頁面即可）

#### 清空全部

點擊左側「🗑️ 清空全部」按鈕，會刪除表格中所有條目（包含原有的）。

> 🚨 **危險操作**：請謹慎使用！建議先備份

---

## 5. 儲存知識庫

### 儲存前檢查清單

在點擊「💾 儲存知識庫」之前，請確認：

- [ ] 所有條目的「標題」、「內容」、「類別」都已填寫
- [ ] 關鍵字格式正確（用逗號分隔）
- [ ] 物種至少選擇一個（🐕 或 🐈）
- [ ] 風險等級合理（高風險用於中毒、急救）
- [ ] 內容沒有錯字或格式問題

### 儲存步驟

#### 步驟 1：點擊「儲存知識庫」按鈕

位於右上角，綠色按鈕。

#### 步驟 2：填寫版本資訊

彈出對話框會要求填寫：

**新版本號**（必填）

```
格式：主版本.次版本.修訂版
範例：1.3.0（系統會自動建議）
```

**更新說明**（必填）

```
說明本次更新的內容，例如：
- 新增犬隻營養知識 5 筆
- 更新急救處理流程
- 修正葡萄中毒風險描述
```

#### 步驟 3：確認儲存

點擊「確認儲存」按鈕，系統會：

1. 自動備份舊知識庫（檔名包含時間戳）
2. 更新 knowledge.json（主要知識庫）
3. 更新 manifest.json（版本管理檔案）
4. 顯示成功訊息

### 儲存成功確認

看到以下訊息表示成功：

```
✅ 知識庫儲存成功！

版本：1.3.0
備份檔：knowledge_backup_2026-01-20_14-30-00.json
```

### 如何驗證更新生效？

1. 回到主聊天介面
2. 點擊右下角「🔄 重新載入」按鈕
3. 版本號應更新為新版本
4. 測試詢問新增的知識點
5. AI 應該能正確回答

---

## 6. 常見問題排除

### Q1：無法登入管理後台

**問題**：輸入密碼後顯示「密碼錯誤」

**解決方法**：

1. 確認密碼是否為 `admin123`（預設）
2. 確認沒有多餘空格
3. 聯絡技術人員確認密碼是否已修改

---

### Q2：上傳 Excel 後沒反應

**問題**：拖放檔案後沒有出現成功訊息

**可能原因與解決方法**：

| 原因         | 解決方法                       |
| ------------ | ------------------------------ |
| 欄位名稱錯誤 | 下載範本，確認欄位名稱完全一致 |
| 檔案格式錯誤 | 確認是 .xlsx 或 .xls 格式      |
| 檔案過大     | 壓縮檔案或分批上傳             |
| 瀏覽器不支援 | 使用 Chrome 或 Edge 瀏覽器     |

---

### Q3：PDF 提取失敗

**錯誤訊息**：「PDF 處理失敗（請確保後端服務已啟動）」

**解決方法**：

1. **確認後端服務是否運行**：
   - 需要技術人員執行命令：`npm run api`
   - 後端服務應運行在 `http://localhost:3001`

2. **檢查 Gemini API 金鑰**：
   - PDF 提取需要 AI 功能
   - 請技術人員確認 `.env` 檔案中的 `GEMINI_API_KEY`

3. **PDF 檔案問題**：
   - 改用文字 PDF（不要用掃描檔）
   - 檔案大小小於 10 MB
   - 改用 Excel 手動輸入

---

### Q4：儲存知識庫失敗

**錯誤訊息**：「儲存失敗: xxx」

**解決方法**：

1. **確認後端服務運行**：
   - 執行 `npm run api`
   - 確認 port 3001 沒有被占用

2. **檢查必填欄位**：
   - 確保所有條目都有「標題」、「內容」、「類別」
   - 刪除空白或不完整的條目

3. **關鍵字格式錯誤**：
   - 確認用「逗號」分隔（不是空格或分號）
   - 範例：`幼犬,餵養,頻率`

---

### Q5：更新後 AI 還是回答舊資料

**問題**：儲存成功但 AI 回答沒更新

**解決方法**：

1. **重新載入知識庫**：
   - 回到主介面
   - 點擊右下角「🔄 重新載入」按鈕

2. **強制刷新網頁**：
   - Windows: 按 `Ctrl + Shift + R`
   - Mac: 按 `Cmd + Shift + R`

3. **清除瀏覽器快取**：
   - Chrome: 設定 → 隱私權 → 清除瀏覽資料
   - 勾選「快取圖片和檔案」

---

### Q6：不小心清空全部怎麼辦？

**問題**：誤點「清空全部」，所有知識都不見了

**解決方法**：

#### 方法 1：重新載入頁面（未儲存的情況）

如果還沒點「儲存知識庫」：

1. 按 `F5` 重新整理頁面
2. 資料會恢復（因為還沒寫入檔案）

#### 方法 2：恢復備份檔案（已儲存的情況）

如果已經儲存了：

1. 聯絡技術人員
2. 請他們從 `public/` 資料夾找到最新的備份檔
3. 檔名格式：`knowledge_backup_2026-01-20_14-30-00.json`
4. 將備份檔改名為 `knowledge.json`
5. 重新載入網頁

---

### Q7：關鍵字要怎麼選？

**問題**：不知道要填哪些關鍵字

**建議原則**：

1. **用戶可能搜尋的詞彙**：
   - 例如：「幼犬」、「餵養」、「幾餐」、「頻率」

2. **包含同義詞**：
   - 例如：「嘔吐」也加上「吐」、「反胃」

3. **包含常見錯別字**：
   - 例如：「葡萄」也可加「提子」

4. **3-8 個關鍵字**：
   - 太少：搜尋不到
   - 太多：影響效能

5. **用逗號分隔**：
   - ✅ 正確：`幼犬,餵養,頻率,次數`
   - ❌ 錯誤：`幼犬 餵養 頻率 次數`

---

### Q8：風險等級如何判斷？

| 風險等級         | 適用情境             | 範例                     |
| ---------------- | -------------------- | ------------------------ |
| **low（低）**    | 一般照護、餵養建議   | 幼犬餵養頻率、洗澡頻率   |
| **medium（中）** | 需注意但不緊急       | 輕微嘔吐、食慾不振       |
| **high（高）**   | 中毒、急救、危險情況 | 葡萄中毒、大量出血、昏迷 |

---

## 7. 技術支援

### 聯絡技術人員的時機

- ❌ 無法登入管理後台
- ❌ 上傳功能完全失效
- ❌ 儲存後資料遺失
- ❌ 需要修改管理員密碼
- ❌ 需要大量刪除或重置資料

### 提供的資訊

請向技術人員說明：

1. **發生的問題**：詳細描述錯誤訊息
2. **操作步驟**：您做了哪些操作
3. **截圖**：如有錯誤訊息請截圖
4. **時間**：問題發生的時間
5. **瀏覽器**：使用的瀏覽器版本

---

## 8. 最佳實務建議

### 定期備份

- ✅ 每週備份一次 `knowledge.json`
- ✅ 重大更新前先備份
- ✅ 保留至少 3 個備份版本

### 版本管理

- ✅ 小修改：遞增修訂版（1.2.0 → 1.2.1）
- ✅ 新增內容：遞增次版本（1.2.0 → 1.3.0）
- ✅ 大改版：遞增主版本（1.2.0 → 2.0.0）

### 更新說明撰寫

清晰的更新說明有助於追蹤歷史：

```
✅ 好的範例：
- 新增幼貓餵養知識 8 筆
- 更新葡萄中毒處理流程
- 修正「嘔吐」關鍵字設定

❌ 不好的範例：
- 更新一些東西
- 修改
```

### 知識品質控管

- ✅ 來源明確：註明資料來源
- ✅ 定期審查：每季檢視過時資訊
- ✅ 同儕審核：重要知識請獸醫確認
- ✅ 測試驗證：更新後測試 AI 回答

---

## 附錄 A：Excel 欄位對照表

| Excel 欄位 | 英文對照   | 必填 | 資料類型 | 範例值                              |
| ---------- | ---------- | ---- | -------- | ----------------------------------- |
| 類別       | category   | ✅   | 固定選項 | 餵養、禁忌、醫療急救、日常照護      |
| 標題       | topic      | ✅   | 文字     | 幼犬餵養頻率                        |
| 關鍵字     | keywords   | ✅   | 逗號分隔 | 幼犬,餵養,頻率,次數                 |
| 內容       | content    | ✅   | 長文字   | 幼犬（1-4個月）建議每天餵食3-4餐... |
| 來源       | source     | ⭕   | 文字     | 獸醫師協會照護指南 第5版            |
| 物種       | species    | ✅   | 逗號分隔 | dog, cat, dog,cat                   |
| 風險等級   | risk_level | ✅   | 固定選項 | low, medium, high                   |

---

## 附錄 B：快速鍵參考

| 功能           | Windows          | Mac              |
| -------------- | ---------------- | ---------------- |
| 強制重新整理   | Ctrl + Shift + R | Cmd + Shift + R  |
| 開啟開發者工具 | F12              | Cmd + Option + I |
| 頁面內搜尋     | Ctrl + F         | Cmd + F          |
| 全選文字       | Ctrl + A         | Cmd + A          |
| 複製           | Ctrl + C         | Cmd + C          |
| 貼上           | Ctrl + V         | Cmd + V          |

---

## 版本歷史

| 版本  | 日期       | 變更內容 |
| ----- | ---------- | -------- |
| 1.0.0 | 2026-01-20 | 初版發布 |

---

**📧 需要協助？** 請聯絡技術支援團隊或參考主要 [README.md](../README.md) 文件。
